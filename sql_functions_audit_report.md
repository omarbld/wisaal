# ØªÙ‚Ø±ÙŠØ± Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¯ÙˆØ§Ù„ SQL ÙÙŠ Ù…Ø´Ø±ÙˆØ¹ ÙˆØµØ§Ù„

## Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ âœ…

### 1. Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†
- `get_volunteer_dashboard_data` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `volunteer_home.dart`
- `get_user_badges` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `volunteer_profile_screen.dart`
- `get_volunteer_logs` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `volunteer_profile_screen.dart`
- `log_volunteer_hours` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `volunteer_task_details.dart`
- `get_leaderboard` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `volunteer/leaderboard_page.dart`, `donor/leaderboard_page.dart`, `association/leaderboard_page.dart`
- `update_user_location` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `volunteer/donations_map_page.dart`

### 2. Ø¯ÙˆØ§Ù„ Ø§Ù„Ø¬Ù…Ø¹ÙŠØ§Øª
- `get_volunteers_for_association` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `association_volunteers.dart`, `association_select_volunteer.dart`
- `get_association_report_data` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `association_reports.dart`
- `get_scheduled_donations` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `association_home.dart`
- `schedule_donation_pickup` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `association_home.dart`

### 3. Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø¯ÙŠØ±
- `get_full_leaderboard` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `manager/leaderboard_page.dart`
- `send_bulk_notification` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `manager_notifications.dart`, `notification_service.dart`

### 4. Ø¯ÙˆØ§Ù„ Ø¹Ø§Ù…Ø©
- `register_volunteer` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `otp_screen.dart`
- `generate_share_text` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `volunteer_task_details.dart`

## Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ SQL Ù„ÙƒÙ† ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ âš ï¸

### 1. Ø¯ÙˆØ§Ù„ Ø§Ù„Ø®Ø±ÙŠØ·Ø© ÙˆØ§Ù„Ù…ÙˆØ§Ù‚Ø¹
- `get_map_data` - Ø¯Ø§Ù„Ø© Ø´Ø§Ù…Ù„Ø© Ù„Ø¬Ù„Ø¨ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø­Ø³Ø¨ Ù†ÙˆØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
- `get_donations_for_map` - Ø¬Ù„Ø¨ Ø§Ù„ØªØ¨Ø±Ø¹Ø§Øª Ø§Ù„Ù…Ø¹Ù„Ù‚Ø© Ù„Ù„Ø®Ø±ÙŠØ·Ø©
- `get_all_donations_for_map` - Ø¬Ù„Ø¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„ØªØ¨Ø±Ø¹Ø§Øª Ù„Ù„Ù…Ø¯ÙŠØ±
- `get_manager_map_data` - Ø¨ÙŠØ§Ù†Ø§Øª Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„Ø©

### 2. Ø¯ÙˆØ§Ù„ Ø§Ù„ØªØ­ÙÙŠØ² ÙˆØ§Ù„Ø£Ù„Ø¹Ø§Ø¨
- `get_gamification_data` - Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ² Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
- `award_points_for_donation` - Ù…Ù†Ø­ Ù†Ù‚Ø§Ø· Ù„Ù„Ù…ØªØ·ÙˆØ¹ (ØªØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ø¨Ø± Ø§Ù„Ù…Ø´ØºÙ„Ø§Øª)
- `check_and_award_badges` - ÙØ­Øµ ÙˆÙ…Ù†Ø­ Ø§Ù„Ø´Ø§Ø±Ø§Øª (ØªØ¹Ù…Ù„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¹Ø¨Ø± Ø§Ù„Ù…Ø´ØºÙ„Ø§Øª)

### 3. Ø¯ÙˆØ§Ù„ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ†
- `get_volunteers_with_ratings` - Ø¬Ù„Ø¨ Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† Ù…Ø¹ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª
- `get_volunteer_management_data` - Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…ØªØ·ÙˆØ¹ÙŠÙ† Ø§Ù„Ø´Ø§Ù…Ù„Ø©

### 4. Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…Ø¯ÙŠØ± Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
- `get_manager_leaderboard_data` - Ø¨ÙŠØ§Ù†Ø§Øª Ù„ÙˆØ­Ø© Ø§Ù„Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ù…Ø¯ÙŠØ±

### 5. Ø¯ÙˆØ§Ù„ QR Code
- `scan_donor_qr_code` - Ù…Ø³Ø­ ÙƒÙˆØ¯ QR Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ù…ØªØ¨Ø±Ø¹
- `scan_association_qr_code` - Ù…Ø³Ø­ ÙƒÙˆØ¯ QR Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø¬Ù…Ø¹ÙŠØ©

### 6. Ø¯ÙˆØ§Ù„ Ø¥Ù†Ø´Ø§Ø¡ Ø£ÙƒÙˆØ§Ø¯ Ø§Ù„ØªÙØ¹ÙŠÙ„
- `generate_activation_code` - Ø¥Ù†Ø´Ø§Ø¡ ÙƒÙˆØ¯ ØªÙØ¹ÙŠÙ„ (ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£ÙƒÙˆØ§Ø¯ ÙŠØ¯ÙˆÙŠØ§Ù‹ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø­Ø§Ù„ÙŠØ§Ù‹)

## Ø§Ù„Ø¯ÙˆØ§Ù„ Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø© Ù…Ù† SQL âŒ

### 1. Ø¯ÙˆØ§Ù„ Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ù„ÙƒÙ† ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ SQL
- `get_volunteer_dashboard_data` - Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ `volunteer_home.dart` Ù„ÙƒÙ† ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø© ÙÙŠ Ù…Ù„Ù SQL

## Ø§Ù„ØªÙˆØµÙŠØ§Øª ğŸ“‹

### 1. Ø¯ÙˆØ§Ù„ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù„ÙƒÙˆØ¯
```dart
// ÙÙŠ volunteer_home.dart - Ø§Ø³ØªØ¨Ø¯Ø§Ù„ get_volunteer_dashboard_data
// ÙŠÙ…ÙƒÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… get_gamification_data Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù†Ù‡Ø§

// ÙÙŠ association_volunteers.dart - Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªØ®Ø¯Ø§Ù…
// get_volunteers_with_ratings Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ ØªÙ‚ÙŠÙŠÙ…Ø§Øª Ø£ÙƒØ«Ø± ØªÙØµÙŠÙ„Ø§Ù‹

// ÙÙŠ manager screens - Ø¥Ø¶Ø§ÙØ© Ø§Ø³ØªØ®Ø¯Ø§Ù…
// get_manager_leaderboard_data Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø´Ø§ï¿½ï¿½Ù„Ø©
// get_manager_map_data Ù„Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©

// Ø¥Ø¶Ø§ÙØ© QR Code scanning functionality
// scan_donor_qr_code Ùˆ scan_association_qr_code
```

### 2. Ø¯ÙˆØ§Ù„ ÙŠØ¬Ø¨ Ø¥Ø¶Ø§ÙØªÙ‡Ø§ Ù„Ù€ SQL
```sql
-- Ø¥Ø¶Ø§ÙØ© Ø¯Ø§Ù„Ø© get_volunteer_dashboard_data Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©
CREATE OR REPLACE FUNCTION get_volunteer_dashboard_data(p_user_id uuid)
RETURNS json AS $$
BEGIN
  RETURN (SELECT json_build_object(
    'userName', (SELECT full_name FROM users WHERE id = p_user_id),
    'total_tasks', (SELECT COUNT(*) FROM donations WHERE volunteer_id = p_user_id),
    'completed_tasks', (SELECT COUNT(*) FROM donations WHERE volunteer_id = p_user_id AND status = 'completed'),
    'in_progress_tasks', (SELECT COUNT(*) FROM donations WHERE volunteer_id = p_user_id AND status = 'in_progress'),
    'avg_rating', (SELECT COALESCE(AVG(rating), 0.0)::float FROM ratings WHERE volunteer_id = p_user_id),
    'next_task', (SELECT row_to_json(d) FROM (SELECT * FROM donations WHERE volunteer_id = p_user_id AND status = 'assigned' ORDER BY created_at LIMIT 1) d)
  ));
END;
$$ LANGUAGE plpgsql SECURITY DEFINER;
```

### 3. ØªØ­Ø³ÙŠÙ†Ø§Øª Ù…Ù‚ØªØ±Ø­Ø©
1. **Ø§Ø³ØªØ®Ø¯Ø§Ù… generate_activation_code**: Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„ÙŠØ¯ÙˆÙŠ ÙÙŠ `association_activation_codes.dart`
2. **Ø¥Ø¶Ø§ÙØ© QR Code scanning**: ØªØ·Ø¨ÙŠÙ‚ Ø¯ÙˆØ§Ù„ Ù…Ø³Ø­ QR ÙÙŠ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù‡Ø§Ù…
3. **ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø®Ø±Ø§Ø¦Ø·**: Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø¯ÙˆØ§Ù„ Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
4. **Ø¥Ø¶Ø§ÙØ© Ø§Ù„ØªØ­ÙÙŠØ²**: Ø§Ø³ØªØ®Ø¯Ø§Ù… `get_gamification_data` Ù„Ø¹Ø±Ø¶ Ø¨ÙŠØ§Ù†Ø§Øª Ø£ÙƒØ«Ø± ØªÙØµÙŠÙ„Ø§Ù‹

## Ù…Ù„Ø®Øµ Ø§Ù„Ø­Ø§Ù„Ø©
- **Ø¯ÙˆØ§Ù„ Ù…Ø³ØªØ®Ø¯Ù…Ø©**: 14 Ø¯Ø§Ù„Ø©
- **Ø¯ÙˆØ§Ù„ ØºÙŠØ± Ù…Ø³ØªØ®Ø¯Ù…Ø©**: 11 Ø¯Ø§Ù„Ø©  
- **Ø¯ÙˆØ§Ù„ Ù…ÙÙ‚ÙˆØ¯Ø©**: 1 Ø¯Ø§Ù„Ø©
- **Ù†Ø³Ø¨Ø© Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…**: 56% Ù…Ù† Ø¯ÙˆØ§Ù„ SQL Ù…Ø³ØªØ®Ø¯Ù…Ø© ÙÙŠ Ø§Ù„ÙƒÙˆØ¯